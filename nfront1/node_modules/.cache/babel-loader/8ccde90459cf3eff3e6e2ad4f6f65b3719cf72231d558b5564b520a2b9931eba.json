{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { watch, nextTick, computed, toRefs } from 'vue';\nimport { isEqual, pick } from 'lodash-unified';\nimport '../../../constants/index.mjs';\nimport '../../../utils/index.mjs';\nimport _Tree from '../../tree/index.mjs';\nimport component from './tree-select-option.mjs';\nimport { toValidArray, treeFind, isValidValue, treeEach, isValidArray } from './utils.mjs';\nimport { isFunction } from '@vue/shared';\nimport { escapeStringRegexp } from '../../../utils/strings.mjs';\nimport { UPDATE_MODEL_EVENT } from '../../../constants/event.mjs';\nconst useTree = (props, {\n  attrs,\n  slots,\n  emit\n}, {\n  select,\n  tree,\n  key\n}) => {\n  watch(() => props.modelValue, () => {\n    if (props.showCheckbox) {\n      nextTick(() => {\n        const treeInstance = tree.value;\n        if (treeInstance && !isEqual(treeInstance.getCheckedKeys(), toValidArray(props.modelValue))) {\n          treeInstance.setCheckedKeys(toValidArray(props.modelValue));\n        }\n      });\n    }\n  }, {\n    immediate: true,\n    deep: true\n  });\n  const propsMap = computed(() => ({\n    value: key.value,\n    label: \"label\",\n    children: \"children\",\n    disabled: \"disabled\",\n    isLeaf: \"isLeaf\",\n    ...props.props\n  }));\n  const getNodeValByProp = (prop, data) => {\n    var _a;\n    const propVal = propsMap.value[prop];\n    if (isFunction(propVal)) {\n      return propVal(data, (_a = tree.value) == null ? void 0 : _a.getNode(getNodeValByProp(\"value\", data)));\n    } else {\n      return data[propVal];\n    }\n  };\n  const defaultExpandedParentKeys = toValidArray(props.modelValue).map(value => {\n    return treeFind(props.data || [], data => getNodeValByProp(\"value\", data) === value, data => getNodeValByProp(\"children\", data), (data, index, array, parent) => parent && getNodeValByProp(\"value\", parent));\n  }).filter(item => isValidValue(item));\n  const cacheOptions = computed(() => {\n    if (!props.renderAfterExpand && !props.lazy) return [];\n    const options = [];\n    treeEach(props.data.concat(props.cacheData), node => {\n      const value = getNodeValByProp(\"value\", node);\n      options.push({\n        value,\n        currentLabel: getNodeValByProp(\"label\", node),\n        isDisabled: getNodeValByProp(\"disabled\", node)\n      });\n    }, data => getNodeValByProp(\"children\", data));\n    return options;\n  });\n  return {\n    ...pick(toRefs(props), Object.keys(_Tree.props)),\n    ...attrs,\n    nodeKey: key,\n    expandOnClickNode: computed(() => {\n      return !props.checkStrictly && props.expandOnClickNode;\n    }),\n    defaultExpandedKeys: computed(() => {\n      return props.defaultExpandedKeys ? props.defaultExpandedKeys.concat(defaultExpandedParentKeys) : defaultExpandedParentKeys;\n    }),\n    renderContent: (h, {\n      node,\n      data,\n      store\n    }) => {\n      return h(component, {\n        value: getNodeValByProp(\"value\", data),\n        label: getNodeValByProp(\"label\", data),\n        disabled: getNodeValByProp(\"disabled\", data),\n        visible: node.visible\n      }, props.renderContent ? () => props.renderContent(h, {\n        node,\n        data,\n        store\n      }) : slots.default ? () => slots.default({\n        node,\n        data,\n        store\n      }) : void 0);\n    },\n    filterNodeMethod: (value, data, node) => {\n      if (props.filterNodeMethod) return props.filterNodeMethod(value, data, node);\n      if (!value) return true;\n      const regexp = new RegExp(escapeStringRegexp(value), \"i\");\n      return regexp.test(getNodeValByProp(\"label\", data) || \"\");\n    },\n    onNodeClick: (data, node, e) => {\n      var _a, _b, _c, _d;\n      (_a = attrs.onNodeClick) == null ? void 0 : _a.call(attrs, data, node, e);\n      if (props.showCheckbox && props.checkOnClickNode) return;\n      if (!props.showCheckbox && (props.checkStrictly || node.isLeaf)) {\n        if (!getNodeValByProp(\"disabled\", data)) {\n          const option = (_b = select.value) == null ? void 0 : _b.states.options.get(getNodeValByProp(\"value\", data));\n          (_c = select.value) == null ? void 0 : _c.handleOptionSelect(option);\n        }\n      } else if (props.expandOnClickNode) {\n        e.proxy.handleExpandIconClick();\n      }\n      (_d = select.value) == null ? void 0 : _d.focus();\n    },\n    onCheck: (data, params) => {\n      var _a;\n      if (!props.showCheckbox) return;\n      const dataValue = getNodeValByProp(\"value\", data);\n      const dataMap = {};\n      treeEach([tree.value.store.root], node => dataMap[node.key] = node, node => node.childNodes);\n      const uncachedCheckedKeys = params.checkedKeys;\n      const cachedKeys = props.multiple ? toValidArray(props.modelValue).filter(item => !(item in dataMap) && !uncachedCheckedKeys.includes(item)) : [];\n      const checkedKeys = cachedKeys.concat(uncachedCheckedKeys);\n      if (props.checkStrictly) {\n        emit(UPDATE_MODEL_EVENT, props.multiple ? checkedKeys : checkedKeys.includes(dataValue) ? dataValue : void 0);\n      } else {\n        if (props.multiple) {\n          emit(UPDATE_MODEL_EVENT, cachedKeys.concat(tree.value.getCheckedKeys(true)));\n        } else {\n          const firstLeaf = treeFind([data], data2 => !isValidArray(getNodeValByProp(\"children\", data2)) && !getNodeValByProp(\"disabled\", data2), data2 => getNodeValByProp(\"children\", data2));\n          const firstLeafKey = firstLeaf ? getNodeValByProp(\"value\", firstLeaf) : void 0;\n          const hasCheckedChild = isValidValue(props.modelValue) && !!treeFind([data], data2 => getNodeValByProp(\"value\", data2) === props.modelValue, data2 => getNodeValByProp(\"children\", data2));\n          emit(UPDATE_MODEL_EVENT, firstLeafKey === props.modelValue || hasCheckedChild ? void 0 : firstLeafKey);\n        }\n      }\n      nextTick(() => {\n        var _a2;\n        const checkedKeys2 = toValidArray(props.modelValue);\n        tree.value.setCheckedKeys(checkedKeys2);\n        (_a2 = attrs.onCheck) == null ? void 0 : _a2.call(attrs, data, {\n          checkedKeys: tree.value.getCheckedKeys(),\n          checkedNodes: tree.value.getCheckedNodes(),\n          halfCheckedKeys: tree.value.getHalfCheckedKeys(),\n          halfCheckedNodes: tree.value.getHalfCheckedNodes()\n        });\n      });\n      (_a = select.value) == null ? void 0 : _a.focus();\n    },\n    cacheOptions\n  };\n};\nexport { useTree };","map":{"version":3,"names":["useTree","props","attrs","slots","emit","select","tree","key","watch","modelValue","showCheckbox","nextTick","treeInstance","value","isEqual","getCheckedKeys","toValidArray","setCheckedKeys","immediate","deep","propsMap","computed","label","children","disabled","isLeaf","getNodeValByProp","prop","data","_a","propVal","isFunction","getNode","defaultExpandedParentKeys","map","treeFind","index","array","parent","filter","item","isValidValue","cacheOptions","renderAfterExpand","lazy","options","treeEach","concat","cacheData","node","push","currentLabel","isDisabled","pick","toRefs","Object","keys","_Tree","nodeKey","expandOnClickNode","checkStrictly","defaultExpandedKeys","renderContent","h","store","component","visible","default","filterNodeMethod","regexp","RegExp","escapeStringRegexp","test","onNodeClick","e","_b","_c","_d","call","checkOnClickNode","option","states","get","handleOptionSelect","proxy","handleExpandIconClick","focus","onCheck","params","dataValue","dataMap","root","childNodes","uncachedCheckedKeys","checkedKeys","cachedKeys","multiple","includes","UPDATE_MODEL_EVENT","firstLeaf","data2","isValidArray","firstLeafKey","hasCheckedChild","_a2","checkedKeys2","checkedNodes","getCheckedNodes","halfCheckedKeys","getHalfCheckedKeys","halfCheckedNodes","getHalfCheckedNodes"],"sources":["../../../../../../packages/components/tree-select/src/tree.ts"],"sourcesContent":["// @ts-nocheck\nimport { computed, nextTick, toRefs, watch } from 'vue'\nimport { isEqual, pick } from 'lodash-unified'\nimport { UPDATE_MODEL_EVENT } from '@element-plus/constants'\nimport { escapeStringRegexp, isFunction } from '@element-plus/utils'\nimport ElTree from '@element-plus/components/tree'\nimport TreeSelectOption from './tree-select-option'\nimport {\n  isValidArray,\n  isValidValue,\n  toValidArray,\n  treeEach,\n  treeFind,\n} from './utils'\nimport type { CacheOption } from './cache-options'\nimport type { Ref } from 'vue'\nimport type ElSelect from '@element-plus/components/select'\nimport type Node from '@element-plus/components/tree/src/model/node'\nimport type { TreeNodeData } from '@element-plus/components/tree/src/tree.type'\nimport type { TreeInstance } from '@element-plus/components/tree'\n\nexport const useTree = (\n  props,\n  { attrs, slots, emit },\n  {\n    select,\n    tree,\n    key,\n  }: {\n    select: Ref<InstanceType<typeof ElSelect> | undefined>\n    tree: Ref<TreeInstance | undefined>\n    key: Ref<string>\n  }\n) => {\n  watch(\n    () => props.modelValue,\n    () => {\n      if (props.showCheckbox) {\n        nextTick(() => {\n          const treeInstance = tree.value\n          if (\n            treeInstance &&\n            !isEqual(\n              treeInstance.getCheckedKeys(),\n              toValidArray(props.modelValue)\n            )\n          ) {\n            treeInstance.setCheckedKeys(toValidArray(props.modelValue))\n          }\n        })\n      }\n    },\n    {\n      immediate: true,\n      deep: true,\n    }\n  )\n\n  const propsMap = computed(() => ({\n    value: key.value,\n    label: 'label',\n    children: 'children',\n    disabled: 'disabled',\n    isLeaf: 'isLeaf',\n    ...props.props,\n  }))\n\n  const getNodeValByProp = (\n    prop: 'value' | 'label' | 'children' | 'disabled' | 'isLeaf',\n    data: TreeNodeData\n  ) => {\n    const propVal = propsMap.value[prop]\n    if (isFunction(propVal)) {\n      return propVal(\n        data,\n        tree.value?.getNode(getNodeValByProp('value', data)) as Node\n      )\n    } else {\n      return data[propVal as string]\n    }\n  }\n\n  const defaultExpandedParentKeys = toValidArray(props.modelValue)\n    .map((value) => {\n      return treeFind(\n        props.data || [],\n        (data) => getNodeValByProp('value', data) === value,\n        (data) => getNodeValByProp('children', data),\n        (data, index, array, parent) =>\n          parent && getNodeValByProp('value', parent)\n      )\n    })\n    .filter((item) => isValidValue(item))\n\n  const cacheOptions = computed(() => {\n    if (!props.renderAfterExpand && !props.lazy) return []\n\n    const options: CacheOption[] = []\n\n    treeEach(\n      props.data.concat(props.cacheData),\n      (node) => {\n        const value = getNodeValByProp('value', node)\n        options.push({\n          value,\n          currentLabel: getNodeValByProp('label', node),\n          isDisabled: getNodeValByProp('disabled', node),\n        })\n      },\n      (data) => getNodeValByProp('children', data)\n    )\n\n    return options\n  })\n\n  return {\n    ...pick(toRefs(props), Object.keys(ElTree.props)),\n    ...attrs,\n    nodeKey: key,\n\n    // only expand on click node when the `check-strictly` is false\n    expandOnClickNode: computed(() => {\n      return !props.checkStrictly && props.expandOnClickNode\n    }),\n\n    // show current selected node only first time,\n    // fix the problem of expanding multiple nodes when checking multiple nodes\n    defaultExpandedKeys: computed(() => {\n      return props.defaultExpandedKeys\n        ? props.defaultExpandedKeys.concat(defaultExpandedParentKeys)\n        : defaultExpandedParentKeys\n    }),\n\n    renderContent: (h, { node, data, store }) => {\n      return h(\n        TreeSelectOption,\n        {\n          value: getNodeValByProp('value', data),\n          label: getNodeValByProp('label', data),\n          disabled: getNodeValByProp('disabled', data),\n          visible: node.visible,\n        },\n        props.renderContent\n          ? () => props.renderContent(h, { node, data, store })\n          : slots.default\n          ? () => slots.default({ node, data, store })\n          : undefined\n      )\n    },\n    filterNodeMethod: (value, data, node) => {\n      if (props.filterNodeMethod)\n        return props.filterNodeMethod(value, data, node)\n      if (!value) return true\n      const regexp = new RegExp(escapeStringRegexp(value), 'i')\n      return regexp.test(getNodeValByProp('label', data) || '')\n    },\n    onNodeClick: (data, node, e) => {\n      attrs.onNodeClick?.(data, node, e)\n\n      // `onCheck` is trigger when `checkOnClickNode`\n      if (props.showCheckbox && props.checkOnClickNode) return\n\n      // now `checkOnClickNode` is false, only no checkbox and `checkStrictly` or `isLeaf`\n      if (!props.showCheckbox && (props.checkStrictly || node.isLeaf)) {\n        if (!getNodeValByProp('disabled', data)) {\n          const option = select.value?.states.options.get(\n            getNodeValByProp('value', data)\n          )\n          select.value?.handleOptionSelect(option)\n        }\n      } else if (props.expandOnClickNode) {\n        e.proxy.handleExpandIconClick()\n      }\n      select.value?.focus()\n    },\n    onCheck: (data, params) => {\n      // ignore when no checkbox, like only `checkOnClickNode` is true\n      if (!props.showCheckbox) return\n\n      const dataValue = getNodeValByProp('value', data)\n      const dataMap = {}\n      treeEach(\n        [tree.value.store.root],\n        (node) => (dataMap[node.key] = node),\n        (node) => node.childNodes\n      )\n\n      // fix: checkedKeys has not cached keys\n      const uncachedCheckedKeys = params.checkedKeys\n      const cachedKeys = props.multiple\n        ? toValidArray(props.modelValue).filter(\n            (item) => !(item in dataMap) && !uncachedCheckedKeys.includes(item)\n          )\n        : []\n      const checkedKeys = cachedKeys.concat(uncachedCheckedKeys)\n\n      if (props.checkStrictly) {\n        emit(\n          UPDATE_MODEL_EVENT,\n          // Checking for changes may come from `check-on-node-click`\n          props.multiple\n            ? checkedKeys\n            : checkedKeys.includes(dataValue)\n            ? dataValue\n            : undefined\n        )\n      }\n      // only can select leaf node\n      else {\n        if (props.multiple) {\n          emit(\n            UPDATE_MODEL_EVENT,\n            cachedKeys.concat((tree.value as TreeInstance).getCheckedKeys(true))\n          )\n        } else {\n          // select first leaf node when check parent\n          const firstLeaf = treeFind(\n            [data],\n            (data) =>\n              !isValidArray(getNodeValByProp('children', data)) &&\n              !getNodeValByProp('disabled', data),\n            (data) => getNodeValByProp('children', data)\n          )\n          const firstLeafKey = firstLeaf\n            ? getNodeValByProp('value', firstLeaf)\n            : undefined\n\n          // unselect when any child checked\n          const hasCheckedChild =\n            isValidValue(props.modelValue) &&\n            !!treeFind(\n              [data],\n              (data) => getNodeValByProp('value', data) === props.modelValue,\n              (data) => getNodeValByProp('children', data)\n            )\n\n          emit(\n            UPDATE_MODEL_EVENT,\n            firstLeafKey === props.modelValue || hasCheckedChild\n              ? undefined\n              : firstLeafKey\n          )\n        }\n      }\n\n      nextTick(() => {\n        const checkedKeys = toValidArray(props.modelValue)\n        tree.value.setCheckedKeys(checkedKeys)\n\n        attrs.onCheck?.(data, {\n          checkedKeys: tree.value.getCheckedKeys(),\n          checkedNodes: tree.value.getCheckedNodes(),\n          halfCheckedKeys: tree.value.getHalfCheckedKeys(),\n          halfCheckedNodes: tree.value.getHalfCheckedNodes(),\n        })\n      })\n\n      select.value?.focus()\n    },\n\n    // else\n    cacheOptions,\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}